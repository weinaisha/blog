<!DOCTYPE html>
<html>
<head>
  <title>jquery实现渐变轮播</title>
  <style type="text/css">
    *{
      box-sizing: border-box;
    }
    .clearfix:after{
      content: '';
      display: block;
      clear: both;
    }
    .rotation{
      position: relative;
      width: 320px;
      height:200px;
    }
    .rotation ul{
      padding: 0;
      margin: 0;
      list-style: none;
    }
    .rotation .img-ct{
      
    }
    .rotation .img-ct>li{
      position: absolute;
      display: none;
    }
    .rotation .img-ct>li img{
      width:320px;
      height: 200px;
    }
    .arrow{
      position: absolute;
      top:50%;
      margin-top: -15px;
      display: block;
      width: 30px;
      height: 30px;
      line-height: 30px;
      border: 1px solid #fff;
      border-radius: 50%;
      text-align: center;
      background: rgba(109, 104, 104, 0.41);
      color: #fff;
      text-decoration: none;
      z-index: 99;
    }
    .arrow:hover{
      opacity: 1;
    }
    .rotation .pre-btn{
      left: 3px;
    }
    .rotation .next-btn{
      right: 3px;
    }
    .rotation .select-btn{
      position: absolute;
      bottom: 15px;
      width: 100%;
      text-align: center;
      font-size: 0;
    }
    .select-btn li{
      display: inline-block;
      border: 1px solid #fff;
      width: 20px;
      height: 7px;
      margin: 0 4px;
      cursor: pointer;
    }
    #active-img{
      display:block;
    }
    .active-btn{
      background: #fff;
    }
  </style>
</head>
<body>
<div class="rotation">
  <ul class="img-ct clearfix">
    <li id="active-img">
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg">
      </a>
    </li>
  </ul>
  <a class="pre-btn arrow" href="#"><</a>
  <a class="next-btn arrow" href="#">></a>
  <ul class="select-btn">
    <li class="active-btn"></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>
<script src="../jquery-3.2.1.js"></script>
<script>
  /*
  var $preBtn=$('.pre-btn')
  var $nextBtn=$('.next-btn')
  var $imgs=$('.rotation .img-ct>li')
  var $imgsCount=$imgs.length
  var $selectBtn=$('.rotation .select-btn>li')
  var isAnimate=false
  var pageIndex=0

  autoPlay()

  $preBtn.click(function(){
    playPre(1)
  })

  $nextBtn.click(function(){
    playNext(1)
  })

  $selectBtn.click(function(){
    var index=$(this).index()
    if (index<pageIndex) {
      playPre(pageIndex-index)
    }
    if (index>pageIndex) {
      playNext(index-pageIndex)
    }
  })

  function autoPlay(){
    clock = setInterval(function(){
      playNext(1);
    }, 2000); 
  }

  function playNext(len){
    if (isAnimate) return
    isAnimate=true
    $imgs.eq(pageIndex).fadeOut()
    pageIndex+=len
    if (pageIndex===$imgsCount) {
      pageIndex=0
    }
    $imgs.eq(pageIndex).fadeIn()
    setSelectBtn()
    isAnimate=false
  }

  function playPre(len){
    if (isAnimate) return
    isAnimate=true
    $imgs.eq(pageIndex).fadeOut()
    pageIndex-=len
    if (pageIndex<0) {
      pageIndex=$imgsCount-1
    }
    $imgs.eq(pageIndex).fadeIn()
    setSelectBtn()
    isAnimate=false
  }

  function setSelectBtn(){
    $selectBtn.removeClass('active-btn')
              .eq(pageIndex).addClass('active-btn')
  }

  function stopAuto(){
    clearInterval(clock);
  }
*/
</script>
<script type="text/javascript">
    
      var $ct = $('.img-ct'),
        $items = $ct.children(),
        $pre = $('.pre-btn'),
        $next = $('.next-btn'),
        $bullet = $('.select-btn'),
        imgWidth = $items.width(),
        imgCount = $ct.children().length;

      var curIdx = 0;
      var isAnimate = false;

      $next.on('click', function(){
        playNext();
      });
      $pre.on('click', function(){
        playPre();
      });
      $bullet.find('li').on('click', function(){
        var idx = $(this).index();
        play(idx);
      });

      play(0);
      autoPlay();

      function playNext(){
        play((curIdx+1)%imgCount)
      }

      function playPre(){
        play((imgCount+curIdx-1)%imgCount)
      }
      function play(idx){
        if(isAnimate) return;
        isAnimate = true;
        $items.eq(curIdx).fadeOut(500);
        $items.eq(idx).fadeIn(500, function(){
          isAnimate = false;
        });
        curIdx = idx;
        setBullet();
      }

      function setBullet(){
        $bullet.children().removeClass('active-btn')
                  .eq(curIdx).addClass('active-btn');
      }

      function stopAuto(){
        clearInterval(clock);
      }

      function autoPlay(){
        clock = setInterval(function(){
          playNext();
        }, 2000); 
      }

</script>
</body>
</html>