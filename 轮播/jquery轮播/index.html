<!DOCTYPE html>
<html>
<head>
  <title>jquery实现轮播</title>
  <style type="text/css">
    *{
      box-sizing: border-box;
    }
    .clearfix:after{
      content: '';
      display: block;
      clear: both;
    }
    .rotation{
      position: relative;
      width: 320px;
      overflow: hidden;
    }
    .rotation ul{
      padding: 0;
      margin: 0;
      list-style: none;
    }
    .rotation .img-ct{
     
    }
    .rotation .img-ct>li{
      float: left;
    }
    .rotation .img-ct>li img{
      width:320px;
      height: 200px;
    }
    .arrow{
      position: absolute;
      top:50%;
      margin-top: -15px;
      display: block;
      width: 30px;
      height: 30px;
      line-height: 30px;
      border: 1px solid #fff;
      border-radius: 50%;
      text-align: center;
      color: #fff;
      text-decoration: none;
      z-index: 99;
    }
    .arrow:hover{
      opacity: .8;
    }
    .rotation .pre-btn{
      left: 3px;
    }
    .rotation .next-btn{
      right: 3px;
    }
    .rotation .select-btn{
      position: absolute;
      bottom: 15px;
      width: 100%;
      text-align: center;
      font-size: 0;
    }
    .select-btn li{
      display: inline-block;
      border: 1px solid #fff;
      width: 20px;
      height: 7px;
      margin: 0 4px;
      cursor: pointer;
    }
    .active{
      background: #fff;
    }
  </style>
</head>
<body>
<div class="rotation">
  <ul class="img-ct clearfix">
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg">
      </a>
    </li>
    <li>
      <a href="#">
        <img src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg">
      </a>
    </li>
  </ul>
  <a class="pre-btn arrow" href="#"><</a>
  <a class="next-btn arrow" href="#">></a>
  <ul class="select-btn">
    <li class="active"></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>
<script src="jquery-3.2.1.js"></script>
<script>
  var $preBtn=$('.pre-btn')
  var $nextBtn=$('.next-btn')
  var $imgCt=$('.img-ct')
  var $imgs=$('.img-ct li')
  var $imgWidth=$imgs.width()
  var $imgLength=$imgs.length
  var pageIndex=0
  var isAnimate=false

  var $selectBtn=$('.select-btn>li')

  $imgCt.append($imgs.first().clone())
  $imgCt.prepend($imgs.last().clone())

  $imgCt.css({'width':($imgLength+2)*$imgWidth,'marginLeft':-$imgWidth})

  $preBtn.on('click',function(){
    playPre(1)
  })

  $nextBtn.on('click',function(){
    playNext(1)
  })

  $selectBtn.on('click',function(){
    var index=$(this).index()
    if (index<pageIndex) {
      playPre(pageIndex-index)
    }
    if (index>pageIndex) {
      playNext(index-pageIndex)
    }
  })

  function playNext(len){
    if (isAnimate) return
    isAnimate=true
    $imgCt.animate({'marginLeft':'-='+$imgWidth*len},function(){
      pageIndex+=len
      // console.log(pageIndex)
      if (pageIndex===$imgLength) {
        $imgCt.css({marginLeft:-$imgWidth})
        pageIndex=0
      }
      setSelectBtn()
      isAnimate=false
    })
  }

  function playPre(len){
    if (isAnimate) return
    isAnimate=true
    $imgCt.animate({marginLeft:'+='+$imgWidth*len},function(){
      pageIndex-=len
      // console.log(pageIndex)
      if (pageIndex<0) {
        $imgCt.css({marginLeft:-$imgLength*$imgWidth})
        pageIndex=$imgLength-1
      }
      setSelectBtn()
      isAnimate=false
    })
  }

  function setSelectBtn(){
    $selectBtn.removeClass('active').eq(pageIndex).addClass('active')
  }
</script>
</body>
</html>