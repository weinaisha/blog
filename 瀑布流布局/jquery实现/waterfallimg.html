<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style>
    *{
      box-sizing: border-box;
    }
    .container{
      position: relative;
      margin: 0 auto;
    }
    .container .items{
      position: absolute;
      padding: 8px;
      margin:10px;
      border: 1px solid #ccc;
      box-shadow: 0 0 4px #ccc;
      transition: all 1s;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="items">
    <img src="https://unsplash.it/250/300?image=10">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/200?image=20">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/230?image=30">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/250?image=40">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/300?image=44">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/210?image=29">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/270?image=17">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/350?image=34">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/400?image=25">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/220?image=15">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/250?image=35">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/320?image=22">
  </div>
  <div class="items">
    <img src="https://unsplash.it/250/200?image=11">
  </div>
</div>
<script src="jquery-3.2.1.js"></script>
<script>
  var WaterFall=(function(){
    function init(){
      waterFall()
      $(window).resize(function(){
        waterFall()
      })
    }
    function waterFall(){
      var $nodes=$('.container .items')
      var $nodeWidth=$nodes.outerWidth(true)
      var columns=parseInt($(window).width()/$nodeWidth)
      
      $('.container').css({width:columns*$nodeWidth})

      var nodesHeight=[]
      for (var i = 0; i < columns; i++) {
        nodesHeight[i]=0
      }

      $.each($nodes,function(){
        var min=Math.min.apply(null,nodesHeight)
        var minIndex=nodesHeight.indexOf(min)
        $(this).css({
          left:minIndex*$nodeWidth,
          top:min
        })
        nodesHeight[minIndex]+=$(this).outerHeight(true);
        console.log(nodesHeight)
      })
    }
    return {
      init:init
    }
  })()

   WaterFall.init()
</script>
</body>
</html>